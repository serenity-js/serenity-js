---
sidebar_position: 3
---

# Serenity BDD Reporter

```mdx-code-block
import Figure from '@site/src/components/Figure'
```

[Serenity reports](https://serenity-bdd.github.io/docs/reporting/the_serenity_reports) are a powerful feature enabled by Serenity BDD. They aim not only to **report test results**, but also to document **how features are tested**, and **what your application does**.
[`@serenity-js/serenity-bdd`](/api/serenity-bdd) module enables integration between Serenity/JS and the Serenity BDD reporting CLI.

**You will learn:**
- How to install Serenity BDD
- How to configure Serenity BDD reporter
- How to produce Serenity BDD reports

<Figure
    caption='Example reports produced by Serenity BDD'
    img={require('@site/static/images/reporting/serenity-bdd-reporter.png')}
/>

## Examples and Project Templates

If you'd like to dive straight into the code,
[Serenity/JS GitHub repository](https://github.com/serenity-js) provides:
- [Serenity/JS project templates](https://github.com/serenity-js?q=template&type=all&language=&sort=), which are the easiest way to start with the framework
- [Examples and reference implementations](https://github.com/serenity-js/serenity-js/tree/main/examples), each set up to produce a Serenity BDD report

:::tip Example Serenity BDD reports
All the [Serenity/JS project templates](https://github.com/serenity-js?q=template&type=all&language=&sort=) are configured to produce Serenity BDD reports and publish them to their GitHub Pages.
Each Serenity/JS project template links to its respective Serenity BDD report from its readme file.

For example, here's where [Serenity/JS + Cucumber + Playwright project template](https://github.com/serenity-js/serenity-js-cucumber-playwright-template/) publishes its [Serenity BDD reports](https://serenity-js.github.io/serenity-js-cucumber-playwright-template/).
:::

## Installation and usage

[Serenity BDD reports](https://serenity-bdd.github.io/docs/reporting/the_serenity_reports) are generated by [Serenity BDD CLI](https://github.com/serenity-bdd/serenity-core/tree/main/serenity-cli),
a Java program downloaded and managed by the [`@serenity-js/serenity-bdd`](/api/serenity-bdd) module.

[`SerenityBDDReporter`](/api/serenity-bdd/class/SerenityBDDReporter) is also available as part of the [`@serenity-js/serenity-bdd`](/api/serenity-bdd) module.
It listens to [domain events](/handbook/reporting/domain-events) emitted by [actors](/api/core/class/Actor), [test runner adapters](/handbook/test-runners/), and other [stage crew members](/api/core/interface/StageCrewMember),
to produce Serenity BDD-compatible JSON reports, which can be then stored as files to disk  by [`ArtifactArchiver`](/handbook/reporting/artifact-archiver).

Resulting JSON files can be processed by [Serenity BDD CLI](https://serenity-bdd.github.io/) to produce a HTML report and rich living documentation containing screenshots, details of HTTP traffic for any [REST API](/api/rest) interactions,
details of any activities performed by Serenity/JS [actors](/api/core/class/Actor) and more.

### Installation

To install the [`@serenity-js/serenity-bdd`](/api/serenity-bdd) module, run the following command in your computer terminal:

```
npm install --save-dev @serenity-js/{core,serenity-bdd}
```

To learn more about the installation process, [follow the API documentation](/api/serenity-bdd).

### Configuration

To use the Serenity BDD Reporter, you need to register it together with the [Artifact Archiver](/api/core/class/ArtifactArchiver) so that the reports are stored to disk:

```typescript
import { configure } from '@serenity-js/core'

configure({
    crew: [
        '@serenity-js/serenity-bdd',
        [ '@serenity-js/core:ArtifactArchiver', { outputDirectory: 'target/site/serenity' } ],
    ]
})
```

To learn how to configure Serenity BDD Reporter with your test runner, [follow the API documentation](/api/serenity-bdd).

### Reporting

To produce Serenity BDD reports, your test suite must:
- download the Serenity BDD CLI, by calling `serenity-bdd update`, which will cache the CLI `jar` locally
- produce intermediate Serenity BDD `.json` reports, by registering [`SerenityBDDReporter`](/api/serenity-bdd/class/SerenityBDDReporter)
- invoke the Serenity BDD CLI when you want to produce the report, by calling `serenity-bdd run`

The pattern used by all the [Serenity/JS Project Templates](/handbook/getting-started#serenityjs-project-templates) relies
on using:
- a [`postinstall`](https://docs.npmjs.com/cli/v9/using-npm/scripts#life-cycle-operation-order) NPM script to download the Serenity BDD CLI
- [`npm-failsafe`](https://www.npmjs.com/package/npm-failsafe) to run the reporting process even if the test suite itself has failed (which is precisely when you need test reports the most...).
- [`rimraf`](https://www.npmjs.com/package/rimraf) as a convenience method to remove any test reports left over from the previous run

```json title="package.json"
{
  "scripts": {
    "postinstall": "serenity-bdd update",
    "clean": "rimraf target",
    "test": "failsafe clean test:execute test:report",
    "test:execute": "cucumber-js",
    "test:report": "serenity-bdd run --features ./features ",
  }
}
```
Note that in the above code sample, you should configure `test:execute` to invoke your [test runner](/handbook/test-runners/) of choice.

To learn more about the `SerenityBDDReporter`, please consult:
- installation instructions in [`@serenity-js/serenity-bdd` documentation](/api/serenity-bdd),
- configuration examples in [`SerenityBDDReporter`](/api/serenity-bdd/class/SerenityBDDReporter).

You might also want to explore [Serenity/JS example projects on GitHub](https://github.com/serenity-js/serenity-js/tree/main/examples).

## Integration

`SerenityBDDReporter` emits [`ArtifactGenerated`](/api/core-events/class/ArtifactGenerated) containing Serenity BDD-standard JSON reports,
which can be stored to disk by [`ArtifactArchiver`](/handbook/reporting/artifact-archiver),
and then turned into Serenity BDD HTML reports by [Serenity BDD Reporting CLI](https://github.com/serenity-bdd/serenity-cli).

```mermaid
graph TB
    A(["Actors"])
    TRA(["Serenity/JS test runner adapter"])
    DEV(["ðŸ’» Developer"])
    S["Serenity"]
    AA["ArtifactArchiver"]
    SBDDR["SerenityBDDReporter"]
    SBDDW["serenity-bdd run"]
    TA["ðŸ“‚ json, png, etc."]
    SBDDCLI(["serenity-bdd-cli.jar"])
    HTML["ðŸ–¥ï¸ Serenity BDD HTML reports"]

    A -- notify --> S
    TRA -- notifies --> S
    DEV -- invokes -----> SBDDW
    S -- notifies ---> SBDDR
    S -- "notifies<br>[ArtifactGenerated]" ---> AA
    AA -- "stores<br>[Artifact]" ----> TA
    SBDDR -- "notifies<br>[ArtifactGenerated]" --> S
    SBDDW -- manages --> SBDDCLI
    SBDDCLI -- reads --> TA
    SBDDCLI -- produces --> HTML

    subgraph "serenity-bdd"
        SBDDR
        SBDDCLI
        SBDDW
    end

    subgraph "core"
        S
        AA
    end

    subgraph "file system"
        TA
        HTML
    end

    class A socket
    class TRA socket
    class R socket

    click A "/api/core/class/Actor"
    click TRA "/handbook/test-runners/"
    click S "/api/core/class/Serenity"
    click AA "/api/core/class/ArtifactArchiver"
    click SBDDR "/api/serenity-bdd/class/SerenityBDDReporter"
    click SBDDW "/api/serenity-bdd"
```
