(self.webpackChunk_documentation_serenity_js_org=self.webpackChunk_documentation_serenity_js_org||[]).push([[20627],{93920:(e,t,n)=>{e.exports={src:{srcSet:n.p+"assets/ideal-img/vs-code-ui.f15b5b2.2336.png 2336w",images:[{path:n.p+"assets/ideal-img/vs-code-ui.f15b5b2.2336.png",width:2336,height:1310}],src:n.p+"assets/ideal-img/vs-code-ui.f15b5b2.2336.png",toString:function(){return n.p+"assets/ideal-img/vs-code-ui.f15b5b2.2336.png"},placeholder:void 0,width:2336,height:1310},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAFCAYAAAB8ZH1oAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAiUlEQVQImR2MUQ6DIBBEuYiwCO6KbaWpCvc/2WvgY5LJ5M1zrXVKOVA1zJTXUTjKTkqJdV1nVBX33A/X78ZsJ0iY43meiESWZcF7j5rieuvU+sWsICJs28bnM0CZ4EgIAddao9ZKSpkokZQTVpRsefZhHLBrvXNdNzlvxBgxM96vgzXKPIZh9p4/7+lIUnGyePYAAAAASUVORK5CYII="}},34297:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var a=n(2784),i=n(56224);function s(e){let{img:t,caption:n,externalLink:s}=e;const r=s?a.createElement("figcaption",null,n," (",a.createElement("a",{href:s,target:"_blank",rel:"noopener noreferrer"},"source"),")"):a.createElement("figcaption",null,n);return a.createElement("figure",null,a.createElement(i.Z,{img:t,alt:n}),r)}},80195:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>m,frontMatter:()=>r,metadata:()=>l,toc:()=>u});var a=n(7896),i=(n(2784),n(30876)),s=n(34297);const r={sidebar_position:1},o="Your first web scenario",l={unversionedId:"web-testing/your-first-web-scenario",id:"web-testing/your-first-web-scenario",title:"Your first web scenario",description:"In this guide, you'll learn the basics of web testing with Serenity/JS; I'll show you how to run and debug existing tests",source:"@site/docs/web-testing/your-first-web-scenario.mdx",sourceDirName:"web-testing",slug:"/web-testing/your-first-web-scenario",permalink:"/handbook/web-testing/your-first-web-scenario",draft:!1,editUrl:"https://github.com/serenity-js/serenity-js/tree/main/documentation/serenity-js.org/docs/web-testing/your-first-web-scenario.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Web testing",permalink:"/handbook/web-testing/"},next:{title:"Page Element Query Language",permalink:"/handbook/web-testing/page-element-query-language"}},p={},u=[{value:"Launching your workspace",id:"launching-your-workspace",level:2},{value:"Running tests in Visual Studio Code",id:"running-tests-in-visual-studio-code",level:2},{value:"Exercises",id:"exercises",level:3},{value:"Writing Serenity/JS test scenarios",id:"writing-serenityjs-test-scenarios",level:2},{value:"Showing the browser window",id:"showing-the-browser-window",level:3},{value:"Designing actor-centred test scenarios",id:"designing-actor-centred-test-scenarios",level:3},{value:"Modelling workflows using reusable activities",id:"modelling-workflows-using-reusable-activities",level:3},{value:"Using portable assertions",id:"using-portable-assertions",level:3},{value:"Analysing assertion failures",id:"analysing-assertion-failures",level:3},{value:"Exercises",id:"exercises-1",level:3},{value:"Debugging tests and interactive execution",id:"debugging-tests-and-interactive-execution",level:2},{value:"Debugging test scenarios",id:"debugging-test-scenarios",level:3},{value:"Debugging tasks",id:"debugging-tasks",level:3},{value:"Retrieving information using questions",id:"retrieving-information-using-questions",level:3},{value:"Debugging questions",id:"debugging-questions",level:3},{value:"Exploring page element locators",id:"exploring-page-element-locators",level:3},{value:"Exercises",id:"exercises-2",level:3},{value:"Test reporting",id:"test-reporting",level:2},{value:"Next steps",id:"next-steps",level:2}],d={toc:u},c="wrapper";function m(e){let{components:t,...r}=e;return(0,i.kt)(c,(0,a.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"your-first-web-scenario"},"Your first web scenario"),(0,i.kt)("p",null,"In this guide, you'll learn the basics of web testing with Serenity/JS; I'll show you how to ",(0,i.kt)("strong",{parentName:"p"},"run and debug existing tests"),"\nand ",(0,i.kt)("strong",{parentName:"p"},"write new test scenarios"),". While we'll focus on helping you ",(0,i.kt)("strong",{parentName:"p"},"get the basics right"),", I'll point you to the more ",(0,i.kt)("strong",{parentName:"p"},"advanced\ntechniques")," and ",(0,i.kt)("strong",{parentName:"p"},"patterns")," when needed."),(0,i.kt)("p",null,"My goal with all the Serenity/JS guides in this handbook, including this one, is that they're easy to follow whether\nyou're a test automation expert or just starting on your journey.\nIf you found anything here that could have been clearer, please let me know in the comments or\n",(0,i.kt)("a",{parentName:"p",href:"https://github.com/serenity-js/serenity-js/tree/main/documentation/serenity-js.org/docs/web-testing/your-first-web-scenario.mdx"},"submit a correction"),"."),(0,i.kt)("p",null,"To keep things simple, we'll use a ",(0,i.kt)("a",{parentName:"p",href:"/handbook/getting-started#serenityjs-gitpods"},(0,i.kt)("strong",{parentName:"a"},"Gitpod.io workspace"))," to work with Serenity/JS in your web browser, so there's ",(0,i.kt)("strong",{parentName:"p"},"no need to install anything")," on your computer.\nIf you prefer to set up Serenity/JS locally instead, follow the installation instructions in ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/serenity-js/serenity-js-playwright-test-template"},"Serenity/JS + Playwright Test project template"),"."),(0,i.kt)("p",null,"Key points:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Serenity/JS works well with popular development environments, including the free ",(0,i.kt)("a",{parentName:"li",href:"https://code.visualstudio.com/"},"Visual Studio Code"),","),(0,i.kt)("li",{parentName:"ul"},"Serenity/JS tests are just high-quality code, so all your regular programming tools will work as expected,"),(0,i.kt)("li",{parentName:"ul"},"Serenity/JS test scenarios are ",(0,i.kt)("strong",{parentName:"li"},"actor-centric")," and follow the ",(0,i.kt)("a",{parentName:"li",href:"/handbook/design/screenplay-pattern"},(0,i.kt)("strong",{parentName:"a"},"Screenplay Pattern"))," to help you capture ",(0,i.kt)("strong",{parentName:"li"},"business domain vocabulary")," and ",(0,i.kt)("strong",{parentName:"li"},"business workflows"),","),(0,i.kt)("li",{parentName:"ul"},"Serenity/JS uses an ",(0,i.kt)("strong",{parentName:"li"},"activity-based")," composition model, optimised for readability and code reuse,"),(0,i.kt)("li",{parentName:"ul"},"Serenity/JS assertions and synchronisation statements are portable across interfaces and integration tools,"),(0,i.kt)("li",{parentName:"ul"},"Serenity/JS has first-class support for TypeScript and the asynchronous nature of the JavaScript runtime.")),(0,i.kt)("admonition",{title:"Pro Tip",type:"info"},(0,i.kt)("p",{parentName:"admonition"},"If you get lost or stumble upon a problem you're not quite sure how to solve - ask on the ",(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("a",{parentName:"strong",href:"https://matrix.to/#/#serenity-js:gitter.im"},"Serenity/JS Community Chat")),".")),(0,i.kt)("h2",{id:"launching-your-workspace"},"Launching your workspace"),(0,i.kt)("p",null,"All ",(0,i.kt)("a",{parentName:"p",href:"/handbook/getting-started#serenityjs-project-templates"},"Serenity/JS project templates"),", such as the one we'll use in this chapter,\n",(0,i.kt)("a",{parentName:"p",href:"/handbook/getting-started#serenityjs-gitpods"},"support Gitpod.io workspaces")," and are configured to\nmake it easy for you to use them in a Visual Studio Code-based development environment.\nOf course, since Serenity/JS tests are standards-based Node.js code, they'll work just as well in any other modern ",(0,i.kt)("abbr",{title:"Integrated Development Environment"},"IDE"),"."),(0,i.kt)("p",null,"In this tutorial, we'll use ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/serenity-js/serenity-js-playwright-test-template"},"Serenity/JS + Playwright Test template"),",\nwhich integrates Serenity/JS with ",(0,i.kt)("a",{parentName:"p",href:"https://playwright.dev/"},"Playwright")," web testing library and its dedicated ",(0,i.kt)("a",{parentName:"p",href:"https://playwright.dev/docs/test-runners#playwright-test"},"Playwright Test")," test runner.\nThe test suite we'll work on interacts with a simple to-do list app that you can experiment with at ",(0,i.kt)("a",{parentName:"p",href:"https://todo-app.serenity-js.org/"},"todo-app.serenity-js.org"),"."),(0,i.kt)("p",null,"To launch your workspace, make sure you have a ",(0,i.kt)("a",{parentName:"p",href:"/handbook/getting-started#your-githubcom-account"},"GitHub account"),",\nwhich will make it easier for you to use all the other ",(0,i.kt)("a",{parentName:"p",href:"/handbook/getting-started"},"Serenity/JS resources")," too."),(0,i.kt)("p",null,'Next, launch your Gitpod.io web IDE using the "Open in Gitpod" button below\nand sign in to your ',(0,i.kt)("a",{parentName:"p",href:"https://gitpod.io/#https://github.com/serenity-js/serenity-js-playwright-test-template"},"Gitpod.io workspace"),"\nusing your GitHub account."),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://gitpod.io/#https://github.com/serenity-js/serenity-js-playwright-test-template"},(0,i.kt)("img",{parentName:"a",src:"https://gitpod.io/button/open-in-gitpod.svg",alt:"Open in Gitpod"}))),(0,i.kt)("admonition",{title:"Did you know?",type:"info"},(0,i.kt)("p",{parentName:"admonition"},"Serenity/JS integrates with several popular test runners, such as Cucumber, Mocha, Jasmine and Playwright Test, as well as various web integration tools,\nsuch as Selenium, Playwright and WebdriverIO. Once you know your way around your first ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/serenity-js/?q=template&type=all&language=&sort="},"Serenity/JS project template"),",\npicking the one right for your team and your project will become a breeze.")),(0,i.kt)("h2",{id:"running-tests-in-visual-studio-code"},"Running tests in Visual Studio Code"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://github.com/serenity-js/serenity-js-playwright-test-template"},"Serenity/JS + Playwright Test template"),"\nyou've just opened in your Gitpod workspace includes several example test scenarios\nlocated under the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/serenity-js/serenity-js-playwright-test-template/tree/main/spec"},(0,i.kt)("inlineCode",{parentName:"a"},"spec")," directory"),"."),(0,i.kt)("p",null,"You can view them using your ",(0,i.kt)("a",{parentName:"p",href:"https://code.visualstudio.com/docs/getstarted/userinterface"},"Visual Studio Code Project Explorer sidebar"),", which should show a directory structure similar to this:"),(0,i.kt)(s.Z,{caption:"Visual Studio Code user interface showing an example test scenario",img:n(93920),mdxType:"Figure"}),(0,i.kt)("p",null,"There are two ways to run Playwright tests in Visual Studio Code, and you can do it either by:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"using the play/check mark icon next to the name of the test in a ",(0,i.kt)("inlineCode",{parentName:"li"},".spec.ts")," file,"),(0,i.kt)("li",{parentName:"ul"},"using the play icon in the Visual Studio Code Test Explorer panel, which shows all the test scenarios Visual Studio Code has detected in your project, as per the screenshot below:")),(0,i.kt)(s.Z,{caption:"Running test scenarios in Visual Studio Code",img:n(81103),mdxType:"Figure"}),(0,i.kt)("p",null,"Once you've inspected the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/serenity-js/serenity-js-playwright-test-template/blob/main/spec/recording-items.spec.ts"},(0,i.kt)("inlineCode",{parentName:"a"},"spec/recording-items.spec.ts")),",\nyou will notice that we're using two functions provided by the ",(0,i.kt)("a",{parentName:"p",href:"/api/playwright-test"},(0,i.kt)("inlineCode",{parentName:"a"},"@serenity-js/playwright-test"))," module that help to organise a test suite:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/api/playwright-test/function/it"},(0,i.kt)("inlineCode",{parentName:"a"},"it"))," - to declare a single test scenario"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/api/playwright-test/function/describe"},(0,i.kt)("inlineCode",{parentName:"a"},"describe"))," - to declare a group of test scenarios")),(0,i.kt)("p",null,"Those ",(0,i.kt)("a",{parentName:"p",href:"/api/playwright-test/function/describe"},(0,i.kt)("inlineCode",{parentName:"a"},"describe"))," and ",(0,i.kt)("a",{parentName:"p",href:"/api/playwright-test/function/it"},(0,i.kt)("inlineCode",{parentName:"a"},"it"))," functions are wrappers around\nPlaywright Test ",(0,i.kt)("a",{parentName:"p",href:"https://playwright.dev/docs/api/class-test#test-describe-1"},(0,i.kt)("inlineCode",{parentName:"a"},"test.describe"))," and ",(0,i.kt)("a",{parentName:"p",href:"https://playwright.dev/docs/api/class-test#test-call"},(0,i.kt)("inlineCode",{parentName:"a"},"test"))," functions, respectively."),(0,i.kt)("p",null,"In addition to the functionality offered by Playwright ",(0,i.kt)("a",{parentName:"p",href:"https://playwright.dev/docs/api/class-test#test-call"},(0,i.kt)("inlineCode",{parentName:"a"},"test"))," function, Serenity/JS ",(0,i.kt)("a",{parentName:"p",href:"/api/playwright-test/function/it"},(0,i.kt)("inlineCode",{parentName:"a"},"it"))," wrapper offers ",(0,i.kt)("a",{parentName:"p",href:"/api/playwright-test/interface/SerenityFixtures"},"Serenity/JS-specific\ntest fixtures"),", such as ",(0,i.kt)("a",{parentName:"p",href:"/api/playwright-test/interface/SerenityFixtures#actor"},(0,i.kt)("inlineCode",{parentName:"a"},"actor")),", ",(0,i.kt)("a",{parentName:"p",href:"/api/playwright-test/interface/SerenityFixtures#actorCalled"},(0,i.kt)("inlineCode",{parentName:"a"},"actorCalled")),",\nor ",(0,i.kt)("a",{parentName:"p",href:"/api/playwright-test/interface/SerenityFixtures#crew"},(0,i.kt)("inlineCode",{parentName:"a"},"crew")),". I'll tell you about them in a moment, but first, let's run the scenarios."),(0,i.kt)("admonition",{title:"Pro Tip",type:"info"},(0,i.kt)("p",{parentName:"admonition"},"If Visual Studio Code didn't detect any test scenarios in your project, or if it doesn't display the play/check mark icon next to the name of the test,\nuse the \"Refresh Tests\" icon in the Test Explorer to reload test configuration."),(0,i.kt)(s.Z,{caption:'Visual Studio Code Test Explorer panel showing the "Refresh tests" button',img:n(44308),mdxType:"Figure"})),(0,i.kt)("h3",{id:"exercises"},"Exercises"),(0,i.kt)("p",null,"To get familiar with running Serenity/JS test scenarios in Visual Studio Code, conduct the following experiments:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Open ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/serenity-js/serenity-js-playwright-test-template/blob/main/spec/recording-items.spec.ts"},(0,i.kt)("inlineCode",{parentName:"a"},"spec/recording-items.spec.ts"))," and run test scenarios such as",(0,i.kt)("inlineCode",{parentName:"li"},"it('should clear text input field when an item is added')")," individually using the play/check mark icon next to the ",(0,i.kt)("inlineCode",{parentName:"li"},"it")," block. Make sure they're passing."),(0,i.kt)("li",{parentName:"ol"},"Run a group of test scenarios by clicking on the play/check mark icon next to the ",(0,i.kt)("inlineCode",{parentName:"li"},"describe")," block, such as ",(0,i.kt)("inlineCode",{parentName:"li"},"describe('Todo List App')"),". Make sure they're passing."),(0,i.kt)("li",{parentName:"ol"},"Run individual test scenarios using Visual Studio Code Test Explorer panel."),(0,i.kt)("li",{parentName:"ol"},'Navigate from a test scenario in a Visual Studio Code Test Explorer panel to its location in the codebase using the "Go to test" icon next to the name of the test.')),(0,i.kt)("h2",{id:"writing-serenityjs-test-scenarios"},"Writing Serenity/JS test scenarios"),(0,i.kt)("p",null,"Now that you know how to run Serenity/JS test scenarios in VS Code, let's talk about what's involved in writing some new ones."),(0,i.kt)("p",null,"First, add the bellow code snippet to your existing test suite in ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/serenity-js/serenity-js-playwright-test-template/blob/main/spec/recording-items.spec.ts"},(0,i.kt)("inlineCode",{parentName:"a"},"spec/recording-items.spec.ts")),"\nby placing it inside the ",(0,i.kt)("inlineCode",{parentName:"p"},"describe('Todo List App')")," block."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="spec/recording-items.spec.ts"',title:'"spec/recording-items.spec.ts"'},"describe('Todo List App', () => {\n\n    it('should allow me to add a todo item', async ({ actor }) => {\n        await actor.attemptsTo(\n            startWithAnEmptyList(),\n\n            recordItem('Buy some milk'),\n\n            Ensure.that(itemNames(), equals([\n                'Buy some milk',\n            ])),\n        )\n    })\n\n    // other test scenarios\n})\n")),(0,i.kt)("p",null,"Well done, you've just created your first Serenity/JS test scenario!"),(0,i.kt)("p",null,"Make sure that you can run this new scenario and that it's passing, and we'll analyse its structure line by line in just a moment."),(0,i.kt)(s.Z,{caption:"Adding a new Serenity/JS test scenario using Visual Studio Code on Gitpod.io",img:n(12075),mdxType:"Figure"}),(0,i.kt)("p",null,"As you can see in the listing above, well-written Serenity/JS test scenarios are ",(0,i.kt)("strong",{parentName:"p"},"concise"),", ",(0,i.kt)("strong",{parentName:"p"},"easy to read"),", and ",(0,i.kt)("strong",{parentName:"p"},"easy to understand"),"\neven to audiences who might not necessarily have background in technology.\nThat's because Serenity/JS is designed to help you express your scenarios in the ",(0,i.kt)("strong",{parentName:"p"},"domain language of your company")," and ",(0,i.kt)("strong",{parentName:"p"},"your business"),"\nand avoid incidental detail and low-level implementation noise that could cloud the picture."),(0,i.kt)("h3",{id:"showing-the-browser-window"},"Showing the browser window"),(0,i.kt)("p",null,"So far you've been running your Serenity/JS test scenarios, but didn't get a chance to see the actual\nbrowser interacting with the web app under test. That's because any web browsers used by Serenity/JS project templates\nare configured to run in \"headless\" mode by default so that they don't get in the way and don't interrupt your work."),(0,i.kt)("p",null,"This setting is configurable, so you can change it when you need to see what's going on under the hood\nor to access the developer tools offered by your browser to ",(0,i.kt)("a",{parentName:"p",href:"/handbook/web-testing/your-first-web-scenario#debugging-tests"},"debug your test scenarios"),"\nor the system under test."),(0,i.kt)("p",null,"In addition to being able to interact with the browser when running the tests locally,\n",(0,i.kt)("a",{parentName:"p",href:"https://github.com/serenity-js/serenity-js-playwright-test-template"},"Serenity/JS + Playwright Test GitPod.io workspace"),"\nI have prepared for you comes equipped with ",(0,i.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Virtual_Network_Computing"},"VNC"),",\nso you can see the browser on Gitpod.io as well."),(0,i.kt)("p",null,"To see the browser:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Enable ",(0,i.kt)("a",{parentName:"li",href:"https://marketplace.visualstudio.com/items?itemName=ms-playwright.playwright#show-browsers"},'"Show browser"')," checkbox in the Playwright panel"),(0,i.kt)("li",{parentName:"ul"},'In the "Ports" panel, open VNC running on port ',(0,i.kt)("inlineCode",{parentName:"li"},"6080"),' in "Preview" mode (this step applies only to Gitpod.io)'),(0,i.kt)("li",{parentName:"ul"},"Run the test!")),(0,i.kt)(s.Z,{caption:"Viewing the browser window while running Serenity/JS test scenarios in Visual Studio Code on Gitpod.io",img:n(9976),mdxType:"Figure"}),(0,i.kt)("p",null,"If your development environment is not based on Visual Studio Code, you can configure your tests to start the browser\nin non-headless mode by setting the ",(0,i.kt)("inlineCode",{parentName:"p"},"headless")," flag to ",(0,i.kt)("inlineCode",{parentName:"p"},"false")," in ",(0,i.kt)("a",{parentName:"p",href:"https://playwright.dev/docs/test-configuration"},"Playwright Test configuration file"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="playwright.config.ts"',title:'"playwright.config.ts"'},"import type { PlaywrightTestConfig } from '@serenity-js/playwright-test'\nconst config: PlaywrightTestConfig = {\n  use: {\n    headless: false,\n    // ...\n  },\n}\n\nexport default config\n")),(0,i.kt)("p",null,"Now that you know how to run the tests, let's get back to code."),(0,i.kt)("h3",{id:"designing-actor-centred-test-scenarios"},"Designing actor-centred test scenarios"),(0,i.kt)("p",null,"You might have noticed that the scenario you've just added starts with an ",(0,i.kt)("inlineCode",{parentName:"p"},"actor"),".\nIn fact, all Serenity/JS test scenarios are ",(0,i.kt)("strong",{parentName:"p"},"actor-centred")," and start like that.\nThis design based on the  ",(0,i.kt)("a",{parentName:"p",href:"/handbook/design/screenplay-pattern"},(0,i.kt)("strong",{parentName:"a"},"Screenplay Pattern"))," helps your test scenarios\nmove away from automation and integration tools taking centre stage\nand instead helps you focus on ",(0,i.kt)("a",{parentName:"p",href:"/api/core/class/Actor"},(0,i.kt)("strong",{parentName:"a"},"actors")),", so ",(0,i.kt)("strong",{parentName:"p"},"people")," and ",(0,i.kt)("strong",{parentName:"p"},"processes")," interacting with\nthe ",(0,i.kt)("strong",{parentName:"p"},"system under test"),"."),(0,i.kt)("p",null,"So what are ",(0,i.kt)("em",{parentName:"p"},"actors"),"? Actors can represent ",(0,i.kt)("strong",{parentName:"p"},"end-users"),", like a shopper interacting with an online store,\nor a traveller interacting with a flight booking system. However, actors can also represent ",(0,i.kt)("strong",{parentName:"p"},"automated processes")," and ",(0,i.kt)("strong",{parentName:"p"},"external systems"),"\n",(0,i.kt)("em",{parentName:"p"},"acting upon")," the system under test.\nExamples here could include an external financial data provider submitting asset price information to our batch processing system,\nor a website crawler bot scanning a web UI and receiving a different version than a regular user. You can also use actors to represents\n",(0,i.kt)("strong",{parentName:"p"},"components")," of a software system initiating some interaction with the component we're interested in, like a microservice sending requests to another microservice under test."),(0,i.kt)("admonition",{title:"Remember",type:"info"},(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("strong",{parentName:"p"},"Actors")," represent ",(0,i.kt)("strong",{parentName:"p"},"people")," and ",(0,i.kt)("strong",{parentName:"p"},"external systems")," interacting with the system under test.")),(0,i.kt)("p",null,"From the implementation perspective, ",(0,i.kt)("a",{parentName:"p",href:"/api/playwright-test"},"Serenity/JS Playwright Test"),"\nmodule takes care of initialising and injecting actors into your test scenarios\nand dismissing them and freeing their resources when the test scenario is finished."),(0,i.kt)("p",null,"All you need to do is to use the Serenity/JS ",(0,i.kt)("a",{parentName:"p",href:"/api/playwright-test/function/it"},(0,i.kt)("inlineCode",{parentName:"a"},"it")," function")," instead of the default Playwright ",(0,i.kt)("inlineCode",{parentName:"p"},"test")," function,\nand ask it for an ",(0,i.kt)("inlineCode",{parentName:"p"},"actor"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="spec/recording-items.spec.ts"',title:'"spec/recording-items.spec.ts"'},"// Use Serenity/JS `describe` and `it` wrappers from `@serenity-js/playwright-test` module:\nimport { describe, it } from '@serenity-js/playwright-test'\n\n// `describe` groups test scenarios together\ndescribe('Todo List App', () => {\n\n    // `it` injects the `actor` object when a test scenario requests it\n    it('should allow me to add a todo item', async ({ actor }) => {\n        await actor.attemptsTo(\n            // ...\n        )\n    })\n\n    // ...\n})\n")),(0,i.kt)("p",null,"Serenity/JS test scenarios can involve ",(0,i.kt)("strong",{parentName:"p"},"one or multiple actors"),". This is useful, for example, when designing scenarios for contexts\nwhere several actors interact with one another, or where several actors are required to complete different parts of a larger workflow.\nExamples of such contexts include multi-user workflow systems, messaging systems, video games, and so on.\nYou can see an example of a basic multi-actor test scenario in ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/serenity-js/serenity-js-playwright-test-template/blob/main/spec/multi-actor.spec.ts"},(0,i.kt)("inlineCode",{parentName:"a"},"spec/multi-actor.spec.ts")),"."),(0,i.kt)("h3",{id:"modelling-workflows-using-reusable-activities"},"Modelling workflows using reusable activities"),(0,i.kt)("p",null,"The role of Serenity/JS actors is to interact with the system under test by performing ",(0,i.kt)("a",{parentName:"p",href:"/api/core/class/Activity"},(0,i.kt)("strong",{parentName:"a"},"activities")),"."),(0,i.kt)("p",null,"You use activities to model the logical elements of a workflow that an end-user or an external system interacting with the system under test\nwould perform to accomplish some ",(0,i.kt)("strong",{parentName:"p"},"goal"),"."),(0,i.kt)("admonition",{title:"Remember",type:"info"},(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("strong",{parentName:"p"},"Actors")," perform ",(0,i.kt)("strong",{parentName:"p"},"activities")," to interact with the system under test and accomplish their ",(0,i.kt)("strong",{parentName:"p"},"goals"),".")),(0,i.kt)("p",null,"From the implementation perspective, ",(0,i.kt)("strong",{parentName:"p"},"Serenity/JS activities")," are the ",(0,i.kt)("strong",{parentName:"p"},"most basic form of code reuse")," and manifest themselves\nas either ",(0,i.kt)("a",{parentName:"p",href:"/api/core/class/Task"},(0,i.kt)("em",{parentName:"a"},"tasks"))," or ",(0,i.kt)("a",{parentName:"p",href:"/api/core/class/Interaction"},(0,i.kt)("em",{parentName:"a"},"interactions")),".\nWe'll discuss both of those in detail when we talk about the ",(0,i.kt)("a",{parentName:"p",href:"/handbook/design/screenplay-pattern"},"Screenplay Pattern"),",\nbut for now let's use the following definitions:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Interactions")," are the low-level activities that ",(0,i.kt)("strong",{parentName:"li"},"interact directly")," with an interface of the system under test.\nExamples here include an interaction to ",(0,i.kt)("a",{parentName:"li",href:"/api/web/class/Click"},"click")," on a button in a web UI,\nor one to ",(0,i.kt)("a",{parentName:"li",href:"/api/rest/class/Send"},"send")," a ",(0,i.kt)("inlineCode",{parentName:"li"},"POST")," request to a REST API.\nSerenity/JS provides ",(0,i.kt)("a",{parentName:"li",href:"/api/"},"dozens of such interactions")," out of the box, and you can create your own when needed."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Tasks")," are ",(0,i.kt)("strong",{parentName:"li"},"composites of other activities"),", created to capture ",(0,i.kt)("strong",{parentName:"li"},"business domain vocabulary"),"\nand help to make steps in your test scenario reflect ",(0,i.kt)("strong",{parentName:"li"},"steps in you business workflow"),'. Examples here might include\na task to "record a to-do item", "create a customer account", or to "purchase a plane ticket".')),(0,i.kt)("p",null,"In our example, a ",(0,i.kt)("strong",{parentName:"p"},"task")," that accomplishes a ",(0,i.kt)("strong",{parentName:"p"},"goal"),' to "record a to-do item" can be achieved by performing three lower-level activities:'),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},'enter the name of the to-do item into a "What needs to be done?" input box,'),(0,i.kt)("li",{parentName:"ul"},"press the enter key,"),(0,i.kt)("li",{parentName:"ul"},"make sure the item is recorded as expected.")),(0,i.kt)("p",null,"You can try to perform this task yourself at ",(0,i.kt)("a",{parentName:"p",href:"https://todo-app.serenity-js.org/"},"todo-app.serenity-js.org"),":"),(0,i.kt)(s.Z,{caption:"Demonstration of recording a to-do item",img:n(3127),mdxType:"Figure"}),(0,i.kt)("p",null,"To see how a task like that would be implemented with Serenity/JS,\nopen ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/serenity-js/serenity-js-playwright-test-template/blob/main/spec/todo-list-app/TodoItem/tasks.ts#10"},(0,i.kt)("inlineCode",{parentName:"a"},"spec/todo-list-app/TodoItem/tasks.ts")),"\nand review the implementation of a task to ",(0,i.kt)("inlineCode",{parentName:"p"},"recordItem"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="spec/todo-list-app/TodoItem/tasks.ts"',title:'"spec/todo-list-app/TodoItem/tasks.ts"'},"import { contain } from '@serenity-js/assertions'\nimport { Task, Wait } from '@serenity-js/core'\nimport { Enter, Key, Press } from '@serenity-js/web'\n\nimport { newTodoInput } from '../TodoApp'\nimport { itemNames } from '../TodoList'\n\nexport const recordItem = (name: string): Task =>           // 1 - reusable function\n    Task.where(`#actor records an item called ${ name }`,   // 2 - task description\n        Enter.theValue(name).into(newTodoInput()),          // 3 - sequence of lower-level activities\n        Press.the(Key.Enter).in(newTodoInput()),\n        Wait.until(itemNames(), contain(name)),\n    )\n")),(0,i.kt)("p",null,"In the listing above, you can see that a definition of a Serenity/JS task is ",(0,i.kt)("strong",{parentName:"p"},"compact"),", ",(0,i.kt)("strong",{parentName:"p"},"easy to read"),",\nand ",(0,i.kt)("strong",{parentName:"p"},"easy to understand"),".\nIn fact, it reads ",(0,i.kt)("em",{parentName:"p"},"almost exactly")," like how I explained the task to you earlier.\nThis design is intentional and makes your code much more accessible and easier to reason about."),(0,i.kt)("p",null,"To implement custom tasks like this and capture the language of ",(0,i.kt)("em",{parentName:"p"},"your business domain")," all you need is just a few lines of code where you define:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"a ",(0,i.kt)("strong",{parentName:"li"},"reusable function"),", named after the ",(0,i.kt)("strong",{parentName:"li"},"goal")," an actor will accomplish having performed a given task, e.g. ",(0,i.kt)("inlineCode",{parentName:"li"},"recordItem"),","),(0,i.kt)("li",{parentName:"ol"},"a ",(0,i.kt)("strong",{parentName:"li"},"task description"),", used for ",(0,i.kt)("a",{parentName:"li",href:"/handbook/reporting/"},"test reporting")," purposes,"),(0,i.kt)("li",{parentName:"ol"},"a ",(0,i.kt)("strong",{parentName:"li"},"sequence of lower-level activities")," that constitute a task.")),(0,i.kt)("p",null,"What's important to reiterate here is that Serenity/JS activities are designed to be ",(0,i.kt)("strong",{parentName:"p"},"reusable"),".\nThis means you could write a task like the one to ",(0,i.kt)("inlineCode",{parentName:"p"},"recordItem")," just once\nand reuse it in any scenario that needs to record to-do items.\nIf the steps involved in ",(0,i.kt)("em",{parentName:"p"},"how")," an actor would go about recording a to-do item in your system were to change,\nyou'd only have to update them in this ",(0,i.kt)("strong",{parentName:"p"},"one place in your codebase")," where the task is defined\nand not in every single scenario that uses it."),(0,i.kt)("admonition",{title:"Did you know?",type:"info"},(0,i.kt)("p",{parentName:"admonition"},"Task decomposition model implemented by Serenity/JS is based on Hierarchical Task Analysis, a technique typically used in User-Centred Design.\nYou can read more about it in my article ",(0,i.kt)("a",{parentName:"p",href:"https://janmolak.com/user-centred-design-how-a-50-year-old-technique-became-the-key-to-scalable-test-automation-66a658a36555"},'"User-Centred Design: How a 50-year-old technique became the key to scalable test automation"'),".")),(0,i.kt)("p",null,"You can define as many or as few tasks as it makes sense to reflect the workflows in your domain.\nYou can make your tasks as high-level or as low-level as you wish.\nYou're not limited to interacting with just the web interfaces either!\nIn fact, you can make your Serenity/JS actors interact with ",(0,i.kt)("strong",{parentName:"p"},"any interface of your system under test"),",\nbe it ",(0,i.kt)("strong",{parentName:"p"},"web UIs"),", ",(0,i.kt)("strong",{parentName:"p"},"REST APIs"),", ",(0,i.kt)("strong",{parentName:"p"},"mobile apps"),", or whatever a Node.js program can talk to."),(0,i.kt)("p",null,"To make your work easier, Serenity/JS modules provide ",(0,i.kt)("a",{parentName:"p",href:"/api/"},(0,i.kt)("strong",{parentName:"a"},"dozens of lower-level interactions"))," you can compose your custom tasks from."),(0,i.kt)("p",null,"This will help you focus on ",(0,i.kt)("strong",{parentName:"p"},"modelling your business workflows")," and ",(0,i.kt)("strong",{parentName:"p"},"designing your test scenarios")," instead of\nwasting your time figuring out how to integrate with the given interface or trying to make several incompatible libraries work together."),(0,i.kt)("p",null,"Serenity/JS activity-based code reuse model also means that as you evolve the vocabulary of your domain-specific tasks\nover time, writing test scenarios becomes easier as you're simply re-arrange existing tasks into new scenarios."),(0,i.kt)("h3",{id:"using-portable-assertions"},"Using portable assertions"),(0,i.kt)("p",null,"Serenity/JS activity-based programming model applies to performing ",(0,i.kt)("a",{parentName:"p",href:"/handbook/design/assertions"},"assertions")," just as well as it applies\nto performing ",(0,i.kt)("a",{parentName:"p",href:"/handbook/web-testing/your-first-web-scenario#modelling-a-workflow-using-reusable-activities"},"tasks and interactions"),".\nIn fact, Serenity/JS assertion to ",(0,i.kt)("a",{parentName:"p",href:"/api/assertions/class/Ensure"},(0,i.kt)("inlineCode",{parentName:"a"},"Ensure"))," is just another interaction\nyou give to an actor to perform."),(0,i.kt)("p",null,"Consider the test scenario ",(0,i.kt)("a",{parentName:"p",href:"/handbook/web-testing/your-first-web-scenario#writing-serenityjs-test-scenarios"},"you've written earlier"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="spec/recording-items.spec.ts"',title:'"spec/recording-items.spec.ts"'},"describe('Todo List App', () => {\n\n    it('should allow me to add a todo item', async ({ actor }) => {\n        await actor.attemptsTo(\n            startWithAnEmptyList(),\n\n            recordItem('Buy some milk'),\n\n            Ensure.that(itemNames(), equals([\n                'Buy some milk',\n            ])),\n        )\n    })\n})\n")),(0,i.kt)("p",null,"The last activity in the sequence above is an assertion for the actor to ",(0,i.kt)("a",{parentName:"p",href:"/api/assertions/class/Ensure"},(0,i.kt)("inlineCode",{parentName:"a"},"Ensure.that")),"\nthe names of the items in our to-do list meet our ",(0,i.kt)("a",{parentName:"p",href:"/api/core/class/Expectation"},(0,i.kt)("em",{parentName:"a"},"expectation")),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"import { Ensure, equals } from '@serenity-js/assertions'\n\nawait actor.attemptsTo(\n    // ...\n    Ensure.that(itemNames(), equals([ 'Buy some milk', ])),\n    //          ^ actual     ^ expectation\n)\n")),(0,i.kt)("p",null,"All ",(0,i.kt)("a",{parentName:"p",href:"/api/assertions"},"Serenity/JS assertions")," follow the ",(0,i.kt)("a",{parentName:"p",href:"/handbook/design/assertions"},(0,i.kt)("strong",{parentName:"a"},"same consistent pattern")),"\nand all the ",(0,i.kt)("a",{parentName:"p",href:"/api/assertions#Index"},"Serenity/JS expectations")," (such as ",(0,i.kt)("a",{parentName:"p",href:"/api/assertions/function/equals"},(0,i.kt)("inlineCode",{parentName:"a"},"equals")),")\nare ",(0,i.kt)("strong",{parentName:"p"},"interface-agnostic"),". This design helps to make your test code ",(0,i.kt)("strong",{parentName:"p"},"portable")," across interfaces\nand lower-level integration tools and enables you to use a single pattern no matter the type of interface you interact with."),(0,i.kt)("p",null,"In addition to ",(0,i.kt)("a",{parentName:"p",href:"/api/assertions#Index"},"interface-agnostic expectations"),",\nSerenity/JS also ships with ",(0,i.kt)("a",{parentName:"p",href:"/handbook/design/assertions#web-assertions"},"web-specific expectations")," like ",(0,i.kt)("a",{parentName:"p",href:"/api/web/function/isVisible"},(0,i.kt)("inlineCode",{parentName:"a"},"isVisible()")),"\nthat are portable across web integration tools, such as Playwright, WebdriverIO, or Selenium."),(0,i.kt)("h3",{id:"analysing-assertion-failures"},"Analysing assertion failures"),(0,i.kt)("p",null,"You've already seen what happens when an assertion passes. But what happens when it fails?"),(0,i.kt)("p",null,"To experience how you'd go about analysing a Serenity/JS assertion failure,\nmodify the scenario ",(0,i.kt)("a",{parentName:"p",href:"/handbook/web-testing/your-first-web-scenario#writing-serenityjs-test-scenarios"},"you've written earlier"),"\nto make it fail:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="spec/recording-items.spec.ts"',title:'"spec/recording-items.spec.ts"'},"describe('Todo List App', () => {\n\n    it('should allow me to add a todo item', async ({ actor }) => {\n        await actor.attemptsTo(\n            startWithAnEmptyList(),\n\n            recordItem('Buy some cake'),\n\n            Ensure.that(itemNames(), equals([\n                'Buy some milk',\n            ])),\n        )\n    })\n})\n")),(0,i.kt)("p",null,"When you run the scenario again, you'll notice how the advanced support for Visual Studio Code with\n",(0,i.kt)("a",{parentName:"p",href:"https://marketplace.visualstudio.com/items?itemName=ms-playwright.playwright"},"Playwright Test extension"),",\nenabled by ",(0,i.kt)("a",{parentName:"p",href:"/handbook/test-runners/playwright-test"},"Serenity/JS Playwright Test")," module,\nmakes it easy to see exactly where the assertion failure has happened."),(0,i.kt)(s.Z,{caption:"Advanced integration between Serenity/JS and Visual Studio Code with Playwright Test extension",img:n(93481),mdxType:"Figure"}),(0,i.kt)("h3",{id:"exercises-1"},"Exercises"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Compare a single-actor scenario in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/serenity-js/serenity-js-playwright-test-template/blob/main/spec/recording-items.spec.ts"},(0,i.kt)("inlineCode",{parentName:"a"},"spec/recording.spec.ts")),"\nand a multi-actor scenario in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/serenity-js/serenity-js-playwright-test-template/blob/main/spec/multi-actor.spec.ts"},(0,i.kt)("inlineCode",{parentName:"a"},"spec/multi-actor.spec.ts")),".\nWhat differences and what similarities can you see in how the actors are accessed?"),(0,i.kt)("li",{parentName:"ol"},"Inspect tasks in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/serenity-js/serenity-js-playwright-test-template/blob/main/spec/todo-list-app/TodoItem/tasks.ts"},(0,i.kt)("inlineCode",{parentName:"a"},"spec/todo-list-app/TodoItem/tasks.ts")),".\nWhat Serenity/JS web interactions do they use? Can you find their usage examples in the API docs of the ",(0,i.kt)("a",{parentName:"li",href:"/api/web"},(0,i.kt)("inlineCode",{parentName:"a"},"@serenity-js/web"))," module?"),(0,i.kt)("li",{parentName:"ol"},"Write another test that adds two items to the to-do list and verifies they've been added correctly. What task can you reuse?"),(0,i.kt)("li",{parentName:"ol"},"Add another interaction to your new test - an assertion that verifies the number of items in the list: ",(0,i.kt)("inlineCode",{parentName:"li"},"Ensure.that(itemNames().length, equals(2))")),(0,i.kt)("li",{parentName:"ol"},"See if you can create a test that adds 2 items, removes one of them, and then verifies the items that are left. Reuse the existing task to ",(0,i.kt)("inlineCode",{parentName:"li"},"remove(itemName)"),"."),(0,i.kt)("li",{parentName:"ol"},"Compare the activity-based code reuse model used by Serenity/JS with other code reuse models you've seen used in the context of test automation in the past.\nHow do they compare?")),(0,i.kt)("h2",{id:"debugging-tests-and-interactive-execution"},"Debugging tests and interactive execution"),(0,i.kt)("p",null,"A ",(0,i.kt)("a",{parentName:"p",href:"https://nodejs.org/en/docs/guides/debugging-getting-started"},"standard Node.js debugger")," used by your IDE is designed to deal with basic, imperative code,\nand not the declarative programming model used by Serenity/JS. This means that using a ",(0,i.kt)("a",{parentName:"p",href:"https://code.visualstudio.com/docs/editor/debugging"},"Visual Studio Code debugger")," to set a breakpoint on one of the activities\ngiven to an actor to perform ",(0,i.kt)("strong",{parentName:"p"},"will not")," have the desired effect. That's because your IDE pauses the scenario when the activity is ",(0,i.kt)("strong",{parentName:"p"},"declared"),"\nand not when it's ",(0,i.kt)("strong",{parentName:"p"},"executed"),"."),(0,i.kt)("p",null,"Luckily, Serenity/JS has a solution to this problem."),(0,i.kt)(s.Z,{caption:"Visual Studio Code debugger pauses execution when the activity is declared, not when it is executed",img:n(47097),mdxType:"Figure"}),(0,i.kt)("h3",{id:"debugging-test-scenarios"},"Debugging test scenarios"),(0,i.kt)("p",null,"To help a Node.js debugger bridge the gap between the imperative and declarative programming models,\nSerenity/JS offers ",(0,i.kt)("a",{parentName:"p",href:"/handbook/design/debugging"},"debugging capabilities")," and the interaction to ",(0,i.kt)("a",{parentName:"p",href:"/api/core/class/Debug"},(0,i.kt)("inlineCode",{parentName:"a"},"Debug")),".\nTo use it, add the following code snippet to your test scenario, making sure to also use Visual Studio Code Quick Fix\nfeature to add ",(0,i.kt)("inlineCode",{parentName:"p"},"import { Debug } from '@serenity-js/core'"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"Debug.values(() => {\n    // highlight-next-line\n    // set breakpoint\n}),\n")),(0,i.kt)("p",null,"Next, ",(0,i.kt)("a",{parentName:"p",href:"https://code.visualstudio.com/docs/editor/debugging"},"set a breakpoint")," on the line indicated by the comment,\nand run your test scenario in debug mode to see your IDE pause the execution between actor's activities:"),(0,i.kt)(s.Z,{caption:"Visual Studio Code debugger pauses execution when the interaction to Debug is invoked",img:n(484),mdxType:"Figure"}),(0,i.kt)("h3",{id:"debugging-tasks"},"Debugging tasks"),(0,i.kt)("p",null,"The great thing about the interaction to ",(0,i.kt)("a",{parentName:"p",href:"/api/core/class/Debug"},(0,i.kt)("inlineCode",{parentName:"a"},"Debug"))," is that you can use it ",(0,i.kt)("strong",{parentName:"p"},"not just in the top-level\ntest scenarios"),", but also in ",(0,i.kt)("strong",{parentName:"p"},"any custom Serenity/JS tasks")," you define."),(0,i.kt)("p",null,"To try it out, open ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/serenity-js/serenity-js-playwright-test-template/blob/main/spec/todo-list-app/TodoApp/tasks.ts"},(0,i.kt)("inlineCode",{parentName:"a"},"spec/todo-list-app/TodoApp/tasks.ts")),"\nand modify the task to ",(0,i.kt)("inlineCode",{parentName:"p"},"startWithAnEmptyList")," to add the interaction to ",(0,i.kt)("inlineCode",{parentName:"p"},"Debug")," and set a breakpoint on the line indicated by the comment:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="spec/todo-list-app/TodoApp/tasks.ts"',title:'"spec/todo-list-app/TodoApp/tasks.ts"'},"import { Ensure, equals } from '@serenity-js/assertions';\nimport { Task, Debug } from '@serenity-js/core';\nimport { Navigate, Page } from '@serenity-js/web';\n\nexport const startWithAnEmptyList = () =>\n    Task.where(`#actor starts with an empty todo list`,\n        Navigate.to('/'),\n        Ensure.that(\n            Page.current().title().describedAs('website title'),\n            equals('Serenity/JS TodoApp'),\n        ),\n        Debug.values(() => {\n            // highlight-next-line\n            // set breakpoint\n        })\n    );\n\n    // ...\n")),(0,i.kt)("p",null,"When you run a scenario using the task to ",(0,i.kt)("inlineCode",{parentName:"p"},"startWithAnEmptyList")," in debug mode,\nyou'll notice that the execution pauses where you wanted it to pause.\nHowever, setting breakpoints is ",(0,i.kt)("strong",{parentName:"p"},"not the only thing")," the interaction to ",(0,i.kt)("inlineCode",{parentName:"p"},"Debug")," can do."),(0,i.kt)("h3",{id:"retrieving-information-using-questions"},"Retrieving information using questions"),(0,i.kt)("p",null,"In the ",(0,i.kt)("a",{parentName:"p",href:"/handbook/design/screenplay-pattern"},"Screenplay Pattern"),", we design our automated tests to model how actors\nperform their activities to accomplish their goals. However, performing interactions is just one side of the coin.\nThe other thing an actor must do is to determine if the behaviour of the system under test meets its acceptance criteria.\nTo do that, actors need to retrieve information from the system, its execution environment, and sometimes - additional\ndata sources."),(0,i.kt)("p",null,"Serenity/JS models the act of information retrieval as ",(0,i.kt)("a",{parentName:"p",href:"/handbook/design/screenplay-pattern#questions"},"questions")," -\nan actor answers a question to obtain some information. Since questions represent a ",(0,i.kt)("strong",{parentName:"p"},"way for actor to obtain the information"),",\nand ",(0,i.kt)("strong",{parentName:"p"},"not the result itself"),", they can be used to parameterise actor's activities and resolved whenever the actor gets\nto performing the parameterised activity."),(0,i.kt)("admonition",{title:"Remember",type:"info"},(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("strong",{parentName:"p"},"Actors")," answer ",(0,i.kt)("strong",{parentName:"p"},"questions")," to obtain information.")),(0,i.kt)("p",null,"To see examples of how to define Serenity/JS questions, open ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/serenity-js/serenity-js-playwright-test-template/blob/main/spec/todo-list-app/TodoList/questions.ts"},(0,i.kt)("inlineCode",{parentName:"a"},"spec/todo-list-app/TodoList/questions.ts")),"."),(0,i.kt)("p",null,"Among several other functions you'll spot ",(0,i.kt)("inlineCode",{parentName:"p"},"itemNames()"),", which should be already ",(0,i.kt)("a",{parentName:"p",href:"/handbook/web-testing/your-first-web-scenario#writing-serenityjs-test-scenarios"},"familiar to you"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="spec/todo-list-app/TodoList/questions.ts"',title:'"spec/todo-list-app/TodoList/questions.ts"'},"import { includes } from '@serenity-js/assertions';\nimport { Answerable, d, QuestionAdapter } from '@serenity-js/core';\nimport { By, PageElement, PageElements, Text } from '@serenity-js/web';\n\nexport const items = () =>\n    PageElements.located(By.css('.todo-list li'))\n        .describedAs('displayed items');\n\nexport const itemNames = () =>\n    Text.ofAll(items())\n        .map(name => name.trim())\n        .describedAs('displayed items') as QuestionAdapter<string[]>;\n\nexport const itemCalled = (name: Answerable<string>) =>\n    items()\n        .where(Text, includes(name))\n        .first()\n        .describedAs(d`an item called ${ name }`) as QuestionAdapter<PageElement>;\n")),(0,i.kt)("p",null,"Just like Serenity/JS activities can be ",(0,i.kt)("a",{parentName:"p",href:"/handbook/web-testing/your-first-web-scenario#modelling-workflows-using-reusable-activities"},"composed into tasks"),",\nSerenity/JS ",(0,i.kt)("a",{parentName:"p",href:"/api/core/class/Question"},"questions")," can be composed with other questions to transform their results."),(0,i.kt)("admonition",{title:"Remember",type:"info"},(0,i.kt)("p",{parentName:"admonition"},"You can compose questions to transform their results.")),(0,i.kt)("p",null,"In particular:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"the question about ",(0,i.kt)("inlineCode",{parentName:"li"},"items()")," resolves to ",(0,i.kt)("a",{parentName:"li",href:"/api/web/class/PageElements"},"page elements"),"\ncorresponding to HTML widgets describing entries in the todo-list,"),(0,i.kt)("li",{parentName:"ul"},"the question about ",(0,i.kt)("inlineCode",{parentName:"li"},"itemNames()")," retrieves the ",(0,i.kt)("a",{parentName:"li",href:"/api/web/class/Text"},"text content")," of those elements,\nand applies a simple transformation to ",(0,i.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/trim"},"trim"),"\nspace characters from both ends of the value,"),(0,i.kt)("li",{parentName:"ul"},"the question about ",(0,i.kt)("inlineCode",{parentName:"li"},"itemCalled(name)")," uses Serenity/JS ",(0,i.kt)("a",{parentName:"li",href:"/handbook/web-testing/page-element-query-language"},"Page Element Query Language"),"\nto retrieve a single item that matches an ",(0,i.kt)("a",{parentName:"li",href:"/handbook/design/assertions"},"expectation"),",")),(0,i.kt)("p",null,"Also note how all the questions define ",(0,i.kt)("a",{parentName:"p",href:"/api/core/class/Question#describedAs"},"custom descriptions")," for Serenity/JS to use when reporting."),(0,i.kt)("h3",{id:"debugging-questions"},"Debugging questions"),(0,i.kt)("p",null,"To use the interaction to ",(0,i.kt)("a",{parentName:"p",href:"/api/core/class/Debug"},(0,i.kt)("inlineCode",{parentName:"a"},"Debug"))," to analyse what a given question resolves to,\nmodify the scenario ",(0,i.kt)("a",{parentName:"p",href:"/handbook/web-testing/your-first-web-scenario#writing-serenityjs-test-scenarios"},"you've written earlier"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="spec/recording-items.spec.ts"',title:'"spec/recording-items.spec.ts"'},"describe('Todo List App', () => {\n\n    it('should allow me to add a todo item', async ({ actor }) => {\n        await actor.attemptsTo(\n            startWithAnEmptyList(),\n\n            recordItem('Buy some milk'),\n\n            Ensure.that(itemNames(), equals([\n                'Buy some milk',\n            ])),\n\n            Debug.values(\n                (results, names) => {\n                    // highlight-next-line\n                    // set breakpoint here\n                },\n                // one or more questions to analyse\n                itemNames()\n            )\n        )\n    })\n\n    // other test scenarios\n})\n")),(0,i.kt)("p",null,"When you run the scenario in debug mode and the execution pauses on the line where you've set the breakpoint,\nyou'll notice that the actor resolved the question returned by ",(0,i.kt)("inlineCode",{parentName:"p"},"itemNames()")," and\nthat the ",(0,i.kt)("a",{parentName:"p",href:"https://code.visualstudio.com/docs/editor/debugging"},"Run and Debug")," panel\nshows the values of ",(0,i.kt)("inlineCode",{parentName:"p"},"results")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"names")," you've specified as your function arguments."),(0,i.kt)("p",null,"To learn more about how this works, check out the ",(0,i.kt)("a",{parentName:"p",href:"/handbook/design/debugging"},"debugging guide"),"."),(0,i.kt)(s.Z,{caption:"Debugging the results of Serenity/JS questions",img:n(57035),mdxType:"Figure"}),(0,i.kt)("h3",{id:"exploring-page-element-locators"},"Exploring page element locators"),(0,i.kt)("p",null,"Serenity/JS ",(0,i.kt)("a",{parentName:"p",href:"/handbook/test-runners/playwright-test"},"Playwright Test module")," enables you to leverage\n",(0,i.kt)("a",{parentName:"p",href:"https://marketplace.visualstudio.com/items?itemName=ms-playwright.playwright#tune-locators"},"locator tuning"),"\ncapabilities of the Playwright Test Visual Studio Code extension.\nThis functionality is provided by Playwright, and more specifically\n",(0,i.kt)("a",{parentName:"p",href:"https://playwright.dev/docs/api/class-page#page-locator"},(0,i.kt)("inlineCode",{parentName:"a"},"page.locator"))," API that it offers."),(0,i.kt)("p",null,"To use it, you'll need to:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"use the interaction to ",(0,i.kt)("a",{parentName:"li",href:"/api/core/class/Debug"},(0,i.kt)("inlineCode",{parentName:"a"},"Debug"))," to pause the scenario at breakpoint,"),(0,i.kt)("li",{parentName:"ul"},"use ",(0,i.kt)("a",{parentName:"li",href:"/api/playwright/class/PlaywrightPage"},(0,i.kt)("inlineCode",{parentName:"a"},"PlaywrightPage.current().nativePage()"))," from ",(0,i.kt)("inlineCode",{parentName:"li"},"@serenity-js/playwright"),"\nto extract a Playwright ",(0,i.kt)("inlineCode",{parentName:"li"},"page")," from the Serenity/JS ",(0,i.kt)("a",{parentName:"li",href:"/api/web/class/Page"},(0,i.kt)("inlineCode",{parentName:"a"},"Page"))," that's wrapping it,"),(0,i.kt)("li",{parentName:"ul"},"interact directly with the ",(0,i.kt)("inlineCode",{parentName:"li"},"page.locator")," API.")),(0,i.kt)("p",null,"To see how the locator tuning features work in practice,\nmodify the scenario ",(0,i.kt)("a",{parentName:"p",href:"/handbook/web-testing/your-first-web-scenario#writing-serenityjs-test-scenarios"},"you've written earlier"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="spec/recording-items.spec.ts"',title:'"spec/recording-items.spec.ts"'},"describe('Todo List App', () => {\n\n    it('should allow me to add a todo item', async ({ actor }) => {\n        await actor.attemptsTo(\n            startWithAnEmptyList(),\n\n            recordItem('Buy some milk'),\n\n            Ensure.that(itemNames(), equals([\n                'Buy some milk',\n            ])),\n\n            Debug.values(\n                (results, page) => {\n                    // set breakpoint on the line below\n                    // highlight-next-line\n                    page.locator('h1')\n                },\n                PlaywrightPage.current().nativePage(),\n            )\n        )\n    })\n\n    // other test scenarios\n})\n")),(0,i.kt)("p",null,"When you run your scenario through a debugger and the execution pauses on the line where you set\nthe breakpoint, you'll notice that you can ",(0,i.kt)("strong",{parentName:"p"},"modify the selector")," passed to ",(0,i.kt)("inlineCode",{parentName:"p"},"page.locator"),"\nand that your ",(0,i.kt)("a",{parentName:"p",href:"/handbook/web-testing/your-first-web-scenario#showing-the-browser-window"},"browser"),"\nhighlights the matching elements ",(0,i.kt)("strong",{parentName:"p"},"live")," as you do it."),(0,i.kt)(s.Z,{caption:"Debugging the results of Serenity/JS questions",img:n(52692),mdxType:"Figure"}),(0,i.kt)("h3",{id:"exercises-2"},"Exercises"),(0,i.kt)("p",null,"To get familiar with debugging Serenity/JS test scenarios in Visual Studio Code, conduct the following experiments:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Use the interaction to ",(0,i.kt)("inlineCode",{parentName:"li"},"Debug")," to inspect the value of ",(0,i.kt)("inlineCode",{parentName:"li"},"Page.current().title()")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"Page.current().url()")),(0,i.kt)("li",{parentName:"ol"},'Write a scenario that adds an item called "walk the dog" to the to-do list, and use the interaction to ',(0,i.kt)("inlineCode",{parentName:"li"},"Debug"),"\nto inspect the value returned by ",(0,i.kt)("inlineCode",{parentName:"li"},"itemCalled('walk the dog').text()")),(0,i.kt)("li",{parentName:"ol"},"Explore other methods offered by Serenity/JS ",(0,i.kt)("a",{parentName:"li",href:"/api/web/class/PageElement"},(0,i.kt)("inlineCode",{parentName:"a"},"PageElement"))," returned by ",(0,i.kt)("inlineCode",{parentName:"li"},"itemCalled(name)"),".\nHow would you check if an element is clickable or visible?"),(0,i.kt)("li",{parentName:"ol"},"Read the guide on ",(0,i.kt)("a",{parentName:"li",href:"/handbook/design/debugging#tweaking-playwright-locators"},"Serenity/JS debugging")," and experiment\nwith live evaluation of locators like ",(0,i.kt)("inlineCode",{parentName:"li"},"h1"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"footer p"),", or ",(0,i.kt)("inlineCode",{parentName:"li"},"li.todo"))),(0,i.kt)("h2",{id:"test-reporting"},"Test reporting"),(0,i.kt)("p",null,"Serenity frameworks are well-known for their state-of-the-art ",(0,i.kt)("a",{parentName:"p",href:"/handbook/reporting/"},"reporting capabilities"),".\nApart from the excellent ",(0,i.kt)("a",{parentName:"p",href:"/handbook/reporting/serenity-bdd-reporter"},"Serenity BDD reports"),", however,\nSerenity/JS can also dramatically improve the standard ",(0,i.kt)("a",{parentName:"p",href:"/handbook/test-runners/playwright-test"},"Playwright Test reports"),".\nReports produced for Playwright Test scenarios that follow the ",(0,i.kt)("a",{parentName:"p",href:"/handbook/design/screenplay-pattern"},(0,i.kt)("strong",{parentName:"a"},"Screenplay Pattern")),"\nautomatically include detailed information about actors' activities and much more thorough assertion error reports thanks\nto the dedicated ",(0,i.kt)("a",{parentName:"p",href:"/api/assertions"},"Serenity/JS assertions")," library."),(0,i.kt)("p",null,"The ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/serenity-js/serenity-js-playwright-test-template"},"Serenity/JS + Playwright Test project template"),"\nyou've been using in this tutorial is already set up to produce both the Serenity BDD and Playwright Test reports."),(0,i.kt)("p",null,"To explore them, run the full test suite by invoking ",(0,i.kt)("inlineCode",{parentName:"p"},"npm test")," in your terminal:"),(0,i.kt)(s.Z,{caption:"Running the full test suite in Visual Studio Code",img:n(34896),mdxType:"Figure"}),(0,i.kt)("p",null,"When the test suite is finished, you'll find your ",(0,i.kt)("a",{parentName:"p",href:"/handbook/reporting/serenity-bdd-reporter"},"Serenity BDD reports"),"\ngenerated under ",(0,i.kt)("inlineCode",{parentName:"p"},"target/site/serenity"),", and served on port ",(0,i.kt)("inlineCode",{parentName:"p"},"8080")," on Gitpod:"),(0,i.kt)(s.Z,{caption:"Serenity BDD reports",img:n(60990),mdxType:"Figure"}),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"/handbook/test-runners/playwright-test#using-serenityjs-reporting-services"},"Playwright Test reports")," are generated\nunder ",(0,i.kt)("inlineCode",{parentName:"p"},"playwright-report")," and served on port ",(0,i.kt)("inlineCode",{parentName:"p"},"8181")," on Gitpod:"),(0,i.kt)(s.Z,{caption:"Enhanced Playwright Test reports",img:n(77414),mdxType:"Figure"}),(0,i.kt)("h2",{id:"next-steps"},"Next steps"),(0,i.kt)("p",null,"Congratulations! \ud83e\udd73 You've just learnt how to write, run, and debug your first Serenity/JS test scenarios!"),(0,i.kt)("p",null,"If you'd like to learn more, I'd suggest for you to:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Explore the guides on ",(0,i.kt)("a",{parentName:"li",href:"/handbook/design/"},"Serenity/JS Core Design Patterns")),(0,i.kt)("li",{parentName:"ul"},"Learn more about using Serenity/JS with ",(0,i.kt)("a",{parentName:"li",href:"/handbook/test-runners/playwright-test"},"Playwright Test")),(0,i.kt)("li",{parentName:"ul"},"Clone the ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/serenity-js/serenity-js-playwright-test-template"},"Serenity/JS + Playwright Test template")," and try running it locally, perhaps as a starting point for your next big project?"),(0,i.kt)("li",{parentName:"ul"},"Make sure to ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/serenity-js/serenity-js"},"give Serenity/JS a \u2b50\ufe0f on GitHub")," and leave a comment or \ud83d\udc4d if you've enjoyed this tutorial!")),(0,i.kt)("p",null,"New tutorials and videos are coming soon, follow ",(0,i.kt)("a",{parentName:"p",href:"https://www.linkedin.com/company/serenity-js"},"Serenity/JS on LinkedIn")," and subscribe to ",(0,i.kt)("a",{parentName:"p",href:"https://www.youtube.com/channel/UC0RdeVPyjtJopVHvlLrXd1Q"},"Serenity/JS YouTube channel")," to get notified when they're available!"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://www.linkedin.com/company/serenity-js"},(0,i.kt)("img",{parentName:"a",src:"https://img.shields.io/badge/Follow%20Serenity%2FJS-0077B5?style=for-the-badge&logo=linkedin&logoColor=white",alt:"LinkedIn Follow"})),"\n",(0,i.kt)("a",{parentName:"p",href:"https://www.youtube.com/@serenity-js"},(0,i.kt)("img",{parentName:"a",src:"https://img.shields.io/badge/Watch%20@serenity--js-E62117?style=for-the-badge&logo=youtube&logoColor=white",alt:"YouTube Follow"}))),(0,i.kt)("admonition",{title:"Help us help you",type:"info"},(0,i.kt)("p",{parentName:"admonition"},"Serenity/JS is a free open-source framework, so we rely on our ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/sponsors/serenity-js"},"wonderful GitHub sponsors")," to keep the lights on."),(0,i.kt)("p",{parentName:"admonition"},"If you appreciate all the effort that goes into making sophisticated tools easy to work with, please support our work and become a Serenity/JS GitHub Sponsor today!"),(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("a",{parentName:"p",href:"https://github.com/sponsors/serenity-js"},(0,i.kt)("img",{parentName:"a",src:"https://img.shields.io/badge/Support%20@serenity%2FJS-703EC8?style=for-the-badge&logo=github&logoColor=white",alt:"GitHub Sponsors"})))))}m.isMDXComponent=!0},3127:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"assets/images/todo-app-record-an-item-2c1d4dcfc79d3f8db0c6fd56fd04e1c8.gif"},12075:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"assets/images/vs-code-adding-a-new-serenity-js-scenario-2acec6c120c8831f4337ee76ce171ab9.gif"},93481:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"assets/images/vs-code-analysing-assertion-failures-891c4dbaa65c46bb16474a4281b719a8.gif"},52692:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"assets/images/vs-code-debugging-exploring-locators-a74c9446d13998c8605056ebbbdec861.gif"},57035:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"assets/images/vs-code-debugging-questions-9fdc72f373b7f3f00e9f685c31c5b658.gif"},484:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"assets/images/vs-code-declarative-debugging-f455a66ef2b805e8e035a890127a4795.gif"},47097:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"assets/images/vs-code-imperative-debugging-5f76288bc4f0ca45132f6c7020d8cf48.gif"},44308:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"assets/images/vs-code-refresh-tests-ebae51e29a08412d07c08a9f86116384.gif"},81103:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"assets/images/vs-code-running-test-scenarios-863f1cb60c7bf3dead8348fb1b147d39.gif"},9976:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"assets/images/vs-code-showing-the-browser-b0384091f130b58e7cf06f59e764c592.gif"},34896:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"assets/images/vs-code-test-reporting-npm-test-a2124ffdd4482089047bbd6535901037.gif"},77414:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"assets/images/vs-code-test-reporting-playwright-test-886953a1a8e8a0dcbde64d9e410f7c87.gif"},60990:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"assets/images/vs-code-test-reporting-serenity-bdd-f851d1e821f4ce5f886356aa30e71920.gif"}}]);