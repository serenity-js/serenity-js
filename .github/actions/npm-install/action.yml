runs:
  using: 'composite'
  steps:
  - name: Read NPM Cache Directory
    run: echo "::set-env name=NPM_CACHE::$(npm config get cache)"

  - name:  Debug
    shell: bash
    run: |
      if [[ $RUNNER_OS == 'Windows' ]]; then
          echo "We're on Windows"
      else
          echo "We're not on Windows"
      fi
      env

  - name: Cache node modules
    shell: bash
    uses: actions/cache@v2
    env:
      cache-name: cache-node-modules
    with:
      # npm cache files are stored in `~/.npm` on Linux/macOS
      path: ~/.npm
      key: ${{ runner.os }}-build-${{ env.cache-name }}-${{ hashFiles('**/package-lock.json') }}
      restore-keys: |
        ${{ runner.os }}-build-${{ env.cache-name }}-
        ${{ runner.os }}-build-
        ${{ runner.os }}-

  - name: Install Dependencies
    run: npm install
